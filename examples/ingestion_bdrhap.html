<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-0.9.658">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>OpenPipelines - BD Rhapsody WTA</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <a class="navbar-brand" href="../index.html">
    <img src="../openpipelines.png" alt="">
  </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html">About</a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-architecture" role="button" data-bs-toggle="dropdown" aria-expanded="false">Architecture</a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-architecture">    
        <li>
    <a class="dropdown-item" href="../architecture/index.html">
 <span class="dropdown-text">Overview</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../architecture/use-cases.html">
 <span class="dropdown-text">Use-cases</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-examples" role="button" data-bs-toggle="dropdown" aria-expanded="false">Examples</a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-examples">    
        <li>
    <a class="dropdown-item" href="../examples/ingestion_bdrhap.html">
 <span class="dropdown-text">BD Rhapsody WTA</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-contribute" role="button" data-bs-toggle="dropdown" aria-expanded="false">Contribute</a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-contribute">    
        <li>
    <a class="dropdown-item" href="../contribute/index.html">
 <span class="dropdown-text">Developers Guide</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://github.com/openpipelines-bio/openpipeline">Source Code</a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#pipeline-arguments" id="toc-pipeline-arguments" class="nav-link active" data-scroll-target="#pipeline-arguments">Pipeline arguments</a></li>
  <li><a href="#table-of-arguments" id="toc-table-of-arguments" class="nav-link" data-scroll-target="#table-of-arguments">Table of arguments</a></li>
  <li><a href="#download-example-files" id="toc-download-example-files" class="nav-link" data-scroll-target="#download-example-files">Download example files</a></li>
  <li><a href="#download-reference" id="toc-download-reference" class="nav-link" data-scroll-target="#download-reference">Download reference</a></li>
  <li><a href="#creating-the-param-file" id="toc-creating-the-param-file" class="nav-link" data-scroll-target="#creating-the-param-file">Creating the param file</a></li>
  <li><a href="#creating-additional-config-settings" id="toc-creating-additional-config-settings" class="nav-link" data-scroll-target="#creating-additional-config-settings">Creating additional config settings</a></li>
  <li><a href="#starting-a-bd-rhapsody-run" id="toc-starting-a-bd-rhapsody-run" class="nav-link" data-scroll-target="#starting-a-bd-rhapsody-run">Starting a BD Rhapsody run</a></li>
  <li><a href="#output" id="toc-output" class="nav-link" data-scroll-target="#output">Output</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/openpipelines-bio/openpipeline-web/edit/main/examples/ingestion_bdrhap.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/openpipelines-bio/openpipeline-web/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">BD Rhapsody WTA</h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<section id="pipeline-arguments" class="level2">
<h2 class="anchored" data-anchor-id="pipeline-arguments">Pipeline arguments</h2>
<p>Run the following command to see the available pipeline arguments.</p>
<pre><code>nextflow \
  run openpipelines-bio/openpipeline -r main_build \
  -main-script target/nextflow/mapping/bd_rhapsody_wta/main.nf \
  --help</code></pre>
</section>
<section id="table-of-arguments" class="level2">
<h2 class="anchored" data-anchor-id="table-of-arguments">Table of arguments</h2>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 6%">
<col style="width: 3%">
<col style="width: 89%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">name</th>
<th style="text-align: left;">type</th>
<th style="text-align: left;">description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">input</td>
<td style="text-align: left;"><code>file</code></td>
<td style="text-align: left;">Path to your read files in the FASTQ.GZ format. You may specify as many R1/R2 read pairs as you want.</td>
</tr>
<tr class="even">
<td style="text-align: left;">reference_genome</td>
<td style="text-align: left;"><code>file</code></td>
<td style="text-align: left;">Path to STAR index as a tar.gz file.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">transcriptome_annotation</td>
<td style="text-align: left;"><code>file</code></td>
<td style="text-align: left;">Path to GTF annotation file.</td>
</tr>
<tr class="even">
<td style="text-align: left;">abseq_reference</td>
<td style="text-align: left;"><code>file</code></td>
<td style="text-align: left;">Path to the AbSeq reference file in FASTA format. Only needed if BD AbSeq Ab-Oligos are used.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">supplemental_reference</td>
<td style="text-align: left;"><code>file</code></td>
<td style="text-align: left;">Path to the supplemental reference file in FASTA format. Only needed if there are additional transgene sequences used in the experiment.</td>
</tr>
<tr class="even">
<td style="text-align: left;">output</td>
<td style="text-align: left;"><code>file</code></td>
<td style="text-align: left;">Output folder. Output still needs to be processed further.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">putative_cell_call</td>
<td style="text-align: left;"><code>string</code></td>
<td style="text-align: left;">Specify the dataset to be used for putative cell calling. For putative cell calling using an AbSeq dataset, please provide an AbSeq_Reference fasta file above.</td>
</tr>
<tr class="even">
<td style="text-align: left;">exact_cell_count</td>
<td style="text-align: left;"><code>integer</code></td>
<td style="text-align: left;">Exact cell count - Set a specific number (&gt;=1) of cells as putative, based on those with the highest error-corrected read count</td>
</tr>
<tr class="odd">
<td style="text-align: left;">disable_putative_calling</td>
<td style="text-align: left;"><code>boolean_true</code></td>
<td style="text-align: left;">Disable Refined Putative Cell Calling - Determine putative cells using only the basic algorithm (minimum second derivative along the cumulative reads curve). The refined algorithm attempts to remove false positives and recover false negatives, but may not be ideal for certain complex mixtures of cell types. Does not apply if Exact Cell Count is set.</td>
</tr>
<tr class="even">
<td style="text-align: left;">subsample</td>
<td style="text-align: left;"><code>double</code></td>
<td style="text-align: left;">A number &gt;1 or fraction (0 &lt; n &lt; 1) to indicate the number or percentage of reads to subsample.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">subsample_seed</td>
<td style="text-align: left;"><code>integer</code></td>
<td style="text-align: left;">A seed for replicating a previous subsampled run.</td>
</tr>
<tr class="even">
<td style="text-align: left;">sample_tags_version</td>
<td style="text-align: left;"><code>string</code></td>
<td style="text-align: left;">Specify if multiplexed run.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">tag_names</td>
<td style="text-align: left;"><code>string</code></td>
<td style="text-align: left;">Tag_Names (optional) - Specify the tag number followed by ‘-’ and the desired sample name to appear in Sample_Tag_Metrics.csv. Do not use the special characters: &amp;, (), [], {}, &lt;&gt;, ?, |</td>
</tr>
<tr class="even">
<td style="text-align: left;">vdj_version</td>
<td style="text-align: left;"><code>string</code></td>
<td style="text-align: left;">Specify if VDJ run.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">run_name</td>
<td style="text-align: left;"><code>string</code></td>
<td style="text-align: left;">Specify a run name to use as the output file base name. Use only letters, numbers, or hyphens. Do not use special characters or spaces.</td>
</tr>
<tr class="even">
<td style="text-align: left;">parallel</td>
<td style="text-align: left;"><code>boolean</code></td>
<td style="text-align: left;">Run jobs in parallel.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">timestamps</td>
<td style="text-align: left;"><code>boolean_true</code></td>
<td style="text-align: left;">Add timestamps to the errors, warnings, and notifications.</td>
</tr>
<tr class="even">
<td style="text-align: left;">override_min_ram</td>
<td style="text-align: left;"><code>integer</code></td>
<td style="text-align: left;">Override the minimum RAM requirements specified in the CWL (in GB).</td>
</tr>
<tr class="odd">
<td style="text-align: left;">override_min_cores</td>
<td style="text-align: left;"><code>integer</code></td>
<td style="text-align: left;">Override the minimum cores requirements specified in the CWL.</td>
</tr>
<tr class="even">
<td style="text-align: left;">dryrun</td>
<td style="text-align: left;"><code>boolean_true</code></td>
<td style="text-align: left;">If true, the output directory will only contain the CWL input files, but the pipeline itself will not be executed.</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="download-example-files" class="level2">
<h2 class="anchored" data-anchor-id="download-example-files">Download example files</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> raw</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">wget</span> <span class="st">"http://bd-rhapsody-public.s3.amazonaws.com/Rhapsody-Demo-Data-Inputs/12WTA-ABC-SMK-EB-5kJRT.tar"</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> <span class="at">-xvf</span> <span class="st">"12WTA-ABC-SMK-EB-5kJRT.tar"</span> <span class="at">-C</span> <span class="st">"raw/"</span> <span class="at">--strip-components</span><span class="op">=</span>1</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="ex">ll</span> <span class="at">-h</span> raw</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>-rw-------. 1 rcannood rcannood 6.2G Jun  3 20:50 12ABC_S1_L432_R1_001.fastq.gz
-rw-------. 1 rcannood rcannood 4.8G Jun  3 20:53 12ABC_S1_L432_R2_001.fastq.gz
-rw-------. 1 rcannood rcannood 257M Jun  3 20:51 12SMK_S1_L432_R1_001.fastq.gz
-rw-------. 1 rcannood rcannood 145M Jun  3 20:51 12SMK_S1_L432_R2_001.fastq.gz
-rw-------. 1 rcannood rcannood  16G Jun  3 20:51 12WTA_S1_L432_R1_001.fastq.gz
-rw-------. 1 rcannood rcannood  20G Jun  3 20:53 12WTA_S1_L432_R2_001.fastq.gz
-rw-------. 1 rcannood rcannood 2.4K Jun  3 00:04 BDAbSeq_ImmuneDiscoveryPanel.fasta</code></pre>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>This file is 45GB in size, so it might take a while to download.</p>
</div>
</div>
<p>Unfortunately, the protocol for dataset is not (yet) described on the <a href="https://scomix.bd.com/hc/en-us/articles/360034192672-Rhapsody-WTA-Demo-Datasets">BD Rhapsody Demo Datasets website</a>. However it seems these samples contain 5k cells from the Jurkat, Ramos and THP1 cell lines mixed in a 1:1:1 ratio, where one sample was tagged with the Whole Transcriptome Amplification (WTA) kit, one with the Single-Cell Multiplexing Kit (SMK), and one with the Antibody-specific BarCode (ABC) kit.</p>
</section>
<section id="download-reference" class="level2">
<h2 class="anchored" data-anchor-id="download-reference">Download reference</h2>
<div class="sourceCode" id="cb4"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> reference</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">wget</span> <span class="st">"https://bd-rhapsody-public.s3.amazonaws.com/Rhapsody-WTA/GRCh38-PhiX-gencodev29/GRCh38-PhiX-gencodev29-20181205.tar.gz"</span> <span class="at">-O</span> <span class="st">"reference/GRCh38-PhiX-gencodev29-20181205.tar.gz"</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">wget</span> <span class="st">"https://bd-rhapsody-public.s3.amazonaws.com/Rhapsody-WTA/GRCh38-PhiX-gencodev29/gencodev29-20181205.gtf"</span> <span class="at">-O</span> <span class="st">"reference/gencodev29-20181205.gtf"</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="ex">ll</span> <span class="at">-h</span> reference</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>-rw-------. 1 rcannood rcannood 1.1G Jun  3 20:30 gencodev29-20181205.gtf
-rw-------. 1 rcannood rcannood  25G Jun  3 20:45 GRCh38-PhiX-gencodev29-20181205.tar.gz</code></pre>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>This reference is already quite old. You might want to build a new version. We might include a pipeline for this in the future.</p>
</div>
</div>
</section>
<section id="creating-the-param-file" class="level2">
<h2 class="anchored" data-anchor-id="creating-the-param-file">Creating the param file</h2>
<p>Contents of <code>params.yaml</code>:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">param_list</span><span class="kw">:</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">id</span><span class="kw">:</span><span class="at"> </span><span class="st">"SMK"</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">run_name</span><span class="kw">:</span><span class="at"> </span><span class="st">"SMK"</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">output</span><span class="kw">:</span><span class="at"> </span><span class="st">"SMK"</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">input</span><span class="kw">:</span><span class="at"> </span><span class="st">"raw/12SMK_S1_L432_R[12]_001.fastq.gz"</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">id</span><span class="kw">:</span><span class="at"> </span><span class="st">"ABC"</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">run_name</span><span class="kw">:</span><span class="at"> </span><span class="st">"ABC"</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">output</span><span class="kw">:</span><span class="at"> </span><span class="st">"ABC"</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">input</span><span class="kw">:</span><span class="at"> </span><span class="st">"raw/12ABC_S1_L432_R[12]_001.fastq.gz"</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">id</span><span class="kw">:</span><span class="at"> </span><span class="st">"WTA"</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">run_name</span><span class="kw">:</span><span class="at"> </span><span class="st">"WTA"</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">output</span><span class="kw">:</span><span class="at"> </span><span class="st">"WTA"</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">input</span><span class="kw">:</span><span class="at"> </span><span class="st">"raw/12WTA_S1_L432_R[12]_001.fastq.gz"</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="fu">abseq_reference</span><span class="kw">:</span><span class="at"> </span><span class="st">"raw/BDAbSeq_ImmuneDiscoveryPanel.fasta"</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a><span class="fu">reference_genome</span><span class="kw">:</span><span class="at"> </span><span class="st">"reference/GRCh38-PhiX-gencodev29-20181205.tar.gz"</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a><span class="fu">transcriptome_annotation</span><span class="kw">:</span><span class="at"> </span><span class="st">"reference/gencodev29-20181205.gtf"</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a><span class="fu">publish_dir</span><span class="kw">:</span><span class="at"> </span><span class="st">"output/"</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a><span class="fu">sample_tags_version</span><span class="kw">:</span><span class="at"> </span><span class="st">"hs"</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a><span class="fu">tag_names</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="st">"1-Jurkat"</span><span class="kw">,</span><span class="at"> </span><span class="st">"2-Ramos"</span><span class="kw">,</span><span class="at"> </span><span class="st">"3-THP1"</span><span class="kw">]</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a><span class="fu">putative_cell_call</span><span class="kw">:</span><span class="at"> </span><span class="st">"mRNA"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="creating-additional-config-settings" class="level2">
<h2 class="anchored" data-anchor-id="creating-additional-config-settings">Creating additional config settings</h2>
<p>Contents of <code>nextflow.config</code>:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode groovy code-with-copy"><code class="sourceCode groovy"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">// define memory and cpu constraints</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>process <span class="op">{</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  withLabel<span class="op">:</span> highmem <span class="op">{</span> memory <span class="op">=</span> <span class="fl">60.G</span>b <span class="op">}</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  withLabel<span class="op">:</span> highcpu <span class="op">{</span> cpus <span class="op">=</span> <span class="dv">30</span> <span class="op">}</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co">// do not stop on error</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>process<span class="op">.</span>errorStrategy <span class="op">=</span> <span class="st">'ignore'</span> </span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="co">// set default container</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>process<span class="op">.</span>container <span class="op">=</span> <span class="st">'nextflow/bash:latest'</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="co">// temp dir needs at least 500GB free disk space</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>docker<span class="op">.</span>temp <span class="op">=</span> <span class="st">"/tmp"</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a><span class="co">// use docker</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>docker<span class="op">.</span>enabled <span class="op">=</span> <span class="kw">true</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="starting-a-bd-rhapsody-run" class="level2">
<h2 class="anchored" data-anchor-id="starting-a-bd-rhapsody-run">Starting a BD Rhapsody run</h2>
<p>Contents of <code>run.sh</code>:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="ex">nextflow</span> <span class="dt">\</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  run openpipelines-bio/openpipeline <span class="at">-r</span> main_build <span class="dt">\</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">-main-script</span> target/nextflow/mapping/bd_rhapsody_wta/main.nf <span class="dt">\</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">-resume</span> <span class="at">-latest</span> <span class="dt">\</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">-params-file</span> params.yaml</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="output" class="level2">
<h2 class="anchored" data-anchor-id="output">Output</h2>
<pre><code>output
├── ABC
│   ├── ABC_Bioproduct_Stats.csv
│   ├── ABC_DBEC_MolsPerCell.csv
│   ├── ABC_DBEC_MolsPerCell_Unfiltered.csv.gz
│   ├── ABC_DBEC_ReadsPerCell.csv
│   ├── ABC_DBEC_ReadsPerCell_Unfiltered.csv.gz
│   ├── ABC_Expression_Data.st
│   ├── ABC_Expression_Data_Unfiltered.st.gz
│   ├── ABC_final.BAM
│   ├── ABC_final.BAM.bai
│   ├── ABC_Metrics_Summary.csv
│   ├── ABC_RSEC_MolsPerCell.csv
│   ├── ABC_RSEC_MolsPerCell_Unfiltered.csv.gz
│   ├── ABC_RSEC_ReadsPerCell.csv
│   ├── ABC_RSEC_ReadsPerCell_Unfiltered.csv.gz
│   └── config.yml
├── SMK
│   ├── Combined_SMK_Expression_Data.st
│   ├── Combined_SMK_final.BAM
│   ├── Combined_SMK_final.BAM.bai
│   ├── Combined_SMK_RSEC_MolsPerCell.csv
│   ├── Combined_SMK_RSEC_ReadsPerCell.csv
│   ├── config.yml
│   ├── SMK_Bioproduct_Stats.csv
│   ├── SMK_Expression_Data_Unfiltered.st.gz
│   ├── SMK_Metrics_Summary.csv
│   ├── SMK_Multiplet_and_Undetermined.zip
│   ├── SMK_RSEC_MolsPerCell_Unfiltered.csv.gz
│   ├── SMK_RSEC_ReadsPerCell_Unfiltered.csv.gz
│   ├── SMK_Sample_Tag_Calls.csv
│   ├── SMK_Sample_Tag_Metrics.csv
│   └── SMK_Sample_Tag_ReadsPerCell.csv
└── WTA
    ├── config.yml
    ├── WTA_Bioproduct_Stats.csv
    ├── WTA_Expression_Data.st
    ├── WTA_Expression_Data_Unfiltered.st.gz
    ├── WTA_final.BAM
    ├── WTA_final.BAM.bai
    ├── WTA_Metrics_Summary.csv
    ├── WTA_RSEC_MolsPerCell.csv
    ├── WTA_RSEC_MolsPerCell_Unfiltered.csv.gz
    ├── WTA_RSEC_ReadsPerCell.csv
    └── WTA_RSEC_ReadsPerCell_Unfiltered.csv.gz</code></pre>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
      <div class="nav-footer-center">Copyright 2022, OpenPipelines-bio</div>
  </div>
</footer>



</body></html>